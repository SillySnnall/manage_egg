(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73eeec88"],{"7f7f":function(t,e,o){var s=o("86cc").f,n=Function.prototype,i=/^\s*function ([^ (]*)/,r="name";r in n||o("9e1e")&&s(n,r,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},af6b:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Row",{staticStyle:{"padding-bottom":"16px"},attrs:{gutter:16}},[o("Col",{attrs:{span:"6"}},[o("Input",{on:{input:t.emptysDearchCustomer},model:{value:t.inputText,callback:function(e){t.inputText=e},expression:"inputText"}},[o("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},[o("Option",{attrs:{value:"shop"}},[t._v("商店名称")]),o("Option",{attrs:{value:"name"}},[t._v("客户名称")]),o("Option",{attrs:{value:"phone"}},[t._v("电话号码")])],1),o("Button",{attrs:{slot:"append",icon:"ios-search"},on:{click:t.findCustomer},slot:"append"})],1)],1),o("Col",{attrs:{span:"2"}},[o("Button",{attrs:{type:"warning",disabled:0==t.user.authority.substr(3,4)},on:{click:t.addCustomerModal}},[t._v("新增")])],1)],1),o("Table",{attrs:{border:"",columns:t.titleList,data:t.customerList},scopedSlots:t._u([{key:"action",fn:function(e){var s=e.row,n=e.index;return[o("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small",disabled:0==t.user.authority.substr(1,2)},on:{click:function(e){return t.editCustomerModal(s,n)}}},[t._v("修改")]),o("Button",{attrs:{type:"error",size:"small",disabled:0==t.user.authority.substr(2,3)},on:{click:function(e){return t.deleteCustomerModal(s,n)}}},[t._v("删除")])]}}])}),t.isShowMoreBtn?o("Button",{staticStyle:{width:"100%"},on:{click:t.loadMore}},[t._v("加载更多")]):t._e(),o("Modal",{attrs:{title:t.titleModalText,closable:!1,"class-name":"vertical-center-modal"},on:{"on-ok":t.addEditCustomerModalOk,"on-cancel":t.addEditCustomerModalCancel},model:{value:t.addEditCustomerModal,callback:function(e){t.addEditCustomerModal=e},expression:"addEditCustomerModal"}},[o("div",[t._v("\n      商店名称：\n      "),o("Input",{staticStyle:{width:"86%"},attrs:{type:"text"},model:{value:t.customer.shop,callback:function(e){t.$set(t.customer,"shop",e)},expression:"customer.shop"}})],1),o("div",{staticStyle:{"padding-bottom":"10px","padding-top":"10px"}},[t._v("\n      客户名称：\n      "),o("Input",{staticStyle:{width:"86%"},attrs:{type:"text"},model:{value:t.customer.name,callback:function(e){t.$set(t.customer,"name",e)},expression:"customer.name"}})],1),o("div",[t._v("\n      手机号码：\n      "),o("Input",{staticStyle:{width:"86%"},attrs:{type:"number"},model:{value:t.customer.phone,callback:function(e){t.$set(t.customer,"phone",e)},expression:"customer.phone"}})],1),o("div",{staticStyle:{"padding-top":"10px"}},[t._v("\n      地区：    \n      "),o("RadioGroup",{attrs:{type:"button"},model:{value:t.customer.region,callback:function(e){t.$set(t.customer,"region",e)},expression:"customer.region"}},[o("Radio",{attrs:{label:"市区"}}),o("Radio",{attrs:{label:"郊县"}})],1)],1)])],1)},n=[],i=(o("7f7f"),o("0e7a")),r=o("c51d"),a={name:"Customer",data:function(){return{user:{},titleList:[{type:"index",width:50,align:"center"},{title:"商店名称",key:"shop"},{title:"客户名称",key:"name"},{title:"电话号码",key:"phone"},{title:"地区",key:"region"},{title:"客户操作",slot:"action",width:130,align:"center"}],customerList:[],addEditCustomerModal:!1,titleModalText:"",inputText:"",searchType:"shop",customer:{},addOrEdit:0,isShowMoreBtn:!0,offset:0,limit:30}},methods:{button4:function(){},loadMore:function(){this.offset++,this.findCustomer()},addCustomerModal:function(){this.titleModalText="新增客户",this.addOrEdit=0,this.addEditCustomerModal=!0},editCustomerModal:function(t,e){this.titleModalText="修改客户",this.addOrEdit=1,this.customer.code=t.code,this.customer.shop=t.shop,this.customer.name=t.name,this.customer.phone=t.phone,this.customer.region=t.region,this.customer.create_time=t.create_time,this.addEditCustomerModal=!0},deleteCustomerModal:function(t,e){var o=this,s=this;this.$Modal.confirm({title:"警告",content:"确定删除此客户？",onOk:function(){o.$Spin.show(),Object(i["a"])(Object(r["b"])(t),function(t){0===t.msg?(s.$Spin.hide(),s.$Message.success("删除成功"),s.offset=0,s.findCustomer()):(s.$Spin.hide(),s.$Message.error(t.error))},function(t){s.$Spin.hide(),s.$Message.error(t)})},onCancel:function(){}})},emptysDearchCustomer:function(){""===this.inputText&&(this.offset=0,this.findCustomer())},addEditCustomerModalCancel:function(){1===this.addOrEdit&&this.newCustomer()},addEditCustomerModalOk:function(){var t=this;0!==this.customer.shop.length?0!==this.customer.name.length?0===this.customer.phone.length||this.customer.phone.length>11?this.$Message.error("电话号码为空或格式不正确"):(this.$Spin.show(),0===this.addOrEdit?Object(i["a"])(Object(r["a"])(t.customer),function(e){0===e.msg?(t.$Message.success("添加成功"),t.newCustomer(),t.$Spin.hide(),t.offset=0,t.findCustomer()):(t.$Spin.hide(),t.$Message.error(e.error))},function(e){t.$Spin.hide(),t.$Message.error(e)}):Object(i["a"])(Object(r["d"])(t.customer),function(e){0===e.msg?(t.$Message.success("修改成功"),t.$Spin.hide(),t.offset=0,t.findCustomer()):(t.$Spin.hide(),t.$Message.error(e.error)),t.newCustomer()},function(e){t.$Spin.hide(),t.$Message.error(e)})):this.$Message.error("客户名称为空"):this.$Message.error("商店名称为空")},findCustomer:function(){var t=this;this.$Spin.show(),Object(i["a"])(Object(r["c"])(t.inputText,t.searchType,t.offset,t.limit),function(e){if(0===e.msg){if(e.data.length<t.limit?t.isShowMoreBtn=!1:t.isShowMoreBtn=!0,0==t.offset)t.customerList=e.data;else for(var o=0;o<e.data.length;o++)t.customerList.push(e.data[o]);t.$Spin.hide()}else t.$Spin.hide(),t.$Message.error(e.error)},function(e){t.$Spin.hide(),t.$Message.error(e)})},newCustomer:function(){this.customer={code:"",shop:"",name:"",phone:"",region:"市区",create_time:0}}},created:function(){null!=sessionStorage.getItem("user")?(this.user=JSON.parse(sessionStorage.getItem("user")),this.newCustomer(),this.findCustomer()):this.$router.push({name:"login"})}},u=a,c=o("2877"),d=Object(c["a"])(u,s,n,!1,null,"7d8131ea",null);e["default"]=d.exports},c51d:function(t,e,o){"use strict";o.d(e,"a",function(){return s}),o.d(e,"d",function(){return n}),o.d(e,"b",function(){return i}),o.d(e,"c",function(){return r});o("7f7f");function s(t){return{ac:"addCustomer",shop:t.shop,name:t.name,phone:t.phone,region:t.region}}function n(t){return{ac:"updateCustomer",code:t.code,shop:t.shop,name:t.name,phone:t.phone,region:t.region}}function i(t){return{ac:"deleteCustomer",code:t.code}}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;return{ac:"findCustomer",offset:o,limit:s,searchText:t,searchType:e}}}}]);
//# sourceMappingURL=chunk-73eeec88.2eafcd27.js.map