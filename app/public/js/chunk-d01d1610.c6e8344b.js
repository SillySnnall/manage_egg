(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d01d1610"],{"02f4":function(t,e,i){var o=i("4588"),n=i("be13");t.exports=function(t){return function(e,i){var r,c,a=String(n(e)),s=o(i),d=a.length;return s<0||s>=d?t?"":void 0:(r=a.charCodeAt(s),r<55296||r>56319||s+1===d||(c=a.charCodeAt(s+1))<56320||c>57343?t?a.charAt(s):r:t?a.slice(s,s+2):c-56320+(r-55296<<10)+65536)}}},"0390":function(t,e,i){"use strict";var o=i("02f4")(!0);t.exports=function(t,e,i){return e+(i?o(t,e).length:1)}},"11e9":function(t,e,i){var o=i("52a7"),n=i("4630"),r=i("6821"),c=i("6a99"),a=i("69a8"),s=i("c69a"),d=Object.getOwnPropertyDescriptor;e.f=i("9e1e")?d:function(t,e){if(t=r(t),e=c(e,!0),s)try{return d(t,e)}catch(i){}if(a(t,e))return n(!o.f.call(t,e),t[e])}},"214f":function(t,e,i){"use strict";i("b0c5");var o=i("2aba"),n=i("32e9"),r=i("79e5"),c=i("be13"),a=i("2b4c"),s=i("520a"),d=a("species"),m=!r(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),u=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();t.exports=function(t,e,i){var l=a(t),p=!r(function(){var e={};return e[l]=function(){return 7},7!=""[t](e)}),f=p?!r(function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[d]=function(){return i}),i[l](""),!e}):void 0;if(!p||!f||"replace"===t&&!m||"split"===t&&!u){var h=/./[l],y=i(c,l,""[t],function(t,e,i,o,n){return e.exec===s?p&&!n?{done:!0,value:h.call(e,i,o)}:{done:!0,value:t.call(i,e,o)}:{done:!1}}),g=y[0],v=y[1];o(String.prototype,t,g),n(RegExp.prototype,l,2==e?function(t,e){return v.call(t,this,e)}:function(t){return v.call(t,this)})}}},"3b2b":function(t,e,i){var o=i("7726"),n=i("5dbc"),r=i("86cc").f,c=i("9093").f,a=i("aae3"),s=i("0bfb"),d=o.RegExp,m=d,u=d.prototype,l=/a/g,p=/a/g,f=new d(l)!==l;if(i("9e1e")&&(!f||i("79e5")(function(){return p[i("2b4c")("match")]=!1,d(l)!=l||d(p)==p||"/a/i"!=d(l,"i")}))){d=function(t,e){var i=this instanceof d,o=a(t),r=void 0===e;return!i&&o&&t.constructor===d&&r?t:n(f?new m(o&&!r?t.source:t,e):m((o=t instanceof d)?t.source:t,o&&r?s.call(t):e),i?this:u,d)};for(var h=function(t){t in d||r(d,t,{configurable:!0,get:function(){return m[t]},set:function(e){m[t]=e}})},y=c(m),g=0;y.length>g;)h(y[g++]);u.constructor=d,d.prototype=u,i("2aba")(o,"RegExp",d)}i("7a56")("RegExp")},"520a":function(t,e,i){"use strict";var o=i("0bfb"),n=RegExp.prototype.exec,r=String.prototype.replace,c=n,a="lastIndex",s=function(){var t=/a/,e=/b*/g;return n.call(t,"a"),n.call(e,"a"),0!==t[a]||0!==e[a]}(),d=void 0!==/()??/.exec("")[1],m=s||d;m&&(c=function(t){var e,i,c,m,u=this;return d&&(i=new RegExp("^"+u.source+"$(?!\\s)",o.call(u))),s&&(e=u[a]),c=n.call(u,t),s&&c&&(u[a]=u.global?c.index+c[0].length:e),d&&c&&c.length>1&&r.call(c[0],i,function(){for(m=1;m<arguments.length-2;m++)void 0===arguments[m]&&(c[m]=void 0)}),c}),t.exports=c},"53b7":function(t,e,i){"use strict";i.d(e,"b",function(){return o}),i.d(e,"a",function(){return n});i("3b2b"),i("a481"),i("6b54");function o(t){""==t.length&&(t="0.00");var e=parseFloat(t);if(isNaN(e))return this.$Message.error("传递参数错误，请检查！"),!1;e=Math.round(100*t)/100;var i=e.toString(),o=i.indexOf(".");o<0&&(o=i.length,i+=".");while(i.length<=o+2)i+="0";return i}function n(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var o in i)if(new RegExp("(".concat(o,")")).test(e)){var n=i[o]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?n:r(n))}return e}function r(t){return("00"+t).substr(t.length)}},"5dbc":function(t,e,i){var o=i("d3f4"),n=i("8b97").set;t.exports=function(t,e,i){var r,c=e.constructor;return c!==i&&"function"==typeof c&&(r=c.prototype)!==i.prototype&&o(r)&&n&&n(t,r),t}},"5f1b":function(t,e,i){"use strict";var o=i("23c6"),n=RegExp.prototype.exec;t.exports=function(t,e){var i=t.exec;if("function"===typeof i){var r=i.call(t,e);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==o(t))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"7f7f":function(t,e,i){var o=i("86cc").f,n=Function.prototype,r=/^\s*function ([^ (]*)/,c="name";c in n||i("9e1e")&&o(n,c,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},"8b97":function(t,e,i){var o=i("d3f4"),n=i("cb7c"),r=function(t,e){if(n(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{o=i("9b43")(Function.call,i("11e9").f(Object.prototype,"__proto__").set,2),o(t,[]),e=!(t instanceof Array)}catch(n){e=!0}return function(t,i){return r(t,i),e?t.__proto__=i:o(t,i),t}}({},!1):void 0),check:r}},9093:function(t,e,i){var o=i("ce10"),n=i("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return o(t,n)}},a481:function(t,e,i){"use strict";var o=i("cb7c"),n=i("4bf8"),r=i("9def"),c=i("4588"),a=i("0390"),s=i("5f1b"),d=Math.max,m=Math.min,u=Math.floor,l=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,f=function(t){return void 0===t?t:String(t)};i("214f")("replace",2,function(t,e,i,h){return[function(o,n){var r=t(this),c=void 0==o?void 0:o[e];return void 0!==c?c.call(o,r,n):i.call(String(r),o,n)},function(t,e){var n=h(i,t,this,e);if(n.done)return n.value;var u=o(t),l=String(this),p="function"===typeof e;p||(e=String(e));var g=u.global;if(g){var v=u.unicode;u.lastIndex=0}var b=[];while(1){var _=s(u,l);if(null===_)break;if(b.push(_),!g)break;var x=String(_[0]);""===x&&(u.lastIndex=a(l,r(u.lastIndex),v))}for(var w="",S=0,$=0;$<b.length;$++){_=b[$];for(var M=String(_[0]),k=d(m(c(_.index),l.length),0),C=[],E=1;E<_.length;E++)C.push(f(_[E]));var O=_.groups;if(p){var j=[M].concat(C,k,l);void 0!==O&&j.push(O);var I=String(e.apply(void 0,j))}else I=y(M,l,k,C,O,e);k>=S&&(w+=l.slice(S,k)+I,S=k+M.length)}return w+l.slice(S)}];function y(t,e,o,r,c,a){var s=o+t.length,d=r.length,m=p;return void 0!==c&&(c=n(c),m=l),i.call(a,m,function(i,n){var a;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,o);case"'":return e.slice(s);case"<":a=c[n.slice(1,-1)];break;default:var m=+n;if(0===m)return i;if(m>d){var l=u(m/10);return 0===l?i:l<=d?void 0===r[l-1]?n.charAt(1):r[l-1]+n.charAt(1):i}a=r[m-1]}return void 0===a?"":a})}})},aae3:function(t,e,i){var o=i("d3f4"),n=i("2d95"),r=i("2b4c")("match");t.exports=function(t){var e;return o(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==n(t))}},b0c5:function(t,e,i){"use strict";var o=i("520a");i("5ca1")({target:"RegExp",proto:!0,forced:o!==/./.exec},{exec:o})},cf51:function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"d",function(){return n}),i.d(e,"b",function(){return r}),i.d(e,"c",function(){return c});i("7f7f");function o(t){return{ac:"addCommodity",name:t.name,weight:t.weight,specifications:t.specifications,home:t.home,bar_code:t.bar_code,expire:t.expire,price_in:t.price_in,price_out:t.price_out,price_out_down:t.price_out_down,stock:t.stock,img_url:t.img_url}}function n(t){return{ac:"updateCommodity",code:t.code,name:t.name,weight:t.weight,specifications:t.specifications,home:t.home,bar_code:t.bar_code,expire:t.expire,price_in:t.price_in,price_out:t.price_out,price_out_down:t.price_out_down,stock:t.stock,img_url:t.img_url}}function r(t){return{ac:"deleteCommodity",code:t.code}}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;return{ac:"findCommodity",offset:i,limit:o,searchText:t,searchType:e}}},f0e6:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Row",{staticStyle:{"padding-bottom":"16px"},attrs:{gutter:16}},[i("Col",{attrs:{span:"6"}},[i("Input",{on:{input:t.emptysDearchCommodity},model:{value:t.inputText,callback:function(e){t.inputText=e},expression:"inputText"}},[i("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},[i("Option",{attrs:{value:"name"}},[t._v("商品名称")]),i("Option",{attrs:{value:"bar_code"}},[t._v("条形码")])],1),i("Button",{attrs:{slot:"append",icon:"ios-search"},on:{click:t.findCommodity},slot:"append"})],1)],1),i("Col",{attrs:{span:"2"}},[i("Button",{attrs:{type:"warning",disabled:0==t.user.authority.substr(3,4)},on:{click:t.addCommodityModal}},[t._v("新增")])],1)],1),i("Table",{attrs:{border:"",columns:t.titleList,data:t.commodityList},scopedSlots:t._u([{key:"action",fn:function(e){var o=e.row,n=e.index;return[i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small",disabled:0==t.user.authority.substr(1,2)},on:{click:function(e){return t.editCommodityModal(o,n)}}},[t._v("修改")]),i("Button",{attrs:{type:"error",size:"small",disabled:0==t.user.authority.substr(2,3)},on:{click:function(e){return t.deleteCommodityModal(o,n)}}},[t._v("删除")])]}}])}),t.isShowMoreBtn?i("Button",{staticStyle:{width:"100%"},on:{click:t.loadMore}},[t._v("加载更多")]):t._e(),i("Modal",{attrs:{title:t.titleModalText,closable:!1,"class-name":"vertical-center-modal"},on:{"on-ok":t.addEditCommodityModalOk,"on-cancel":t.addEditCommodityModalCancel},model:{value:t.addEditCommodityModal,callback:function(e){t.addEditCommodityModal=e},expression:"addEditCommodityModal"}},[i("div",[t._v("\n      商品名称：\n      "),i("Input",{staticStyle:{width:"84%"},attrs:{type:"text"},model:{value:t.commodity.name,callback:function(e){t.$set(t.commodity,"name",e)},expression:"commodity.name"}})],1),i("div",{staticStyle:{"padding-bottom":"10px","padding-top":"10px"}},[t._v("\n      商品型号：\n      "),i("Input",{staticStyle:{width:"60%"},attrs:{type:"text",maxlength:t.weightMaxlength},model:{value:t.commodity.weight,callback:function(e){t.$set(t.commodity,"weight",e)},expression:"commodity.weight"}}),i("span",{staticStyle:{"margin-left":"10px"}},[t._v("（g，kg，mL，L）")])],1),i("div",[t._v("\n      商品规格：\n      "),i("Input",{staticStyle:{width:"60%"},attrs:{type:"number"},model:{value:t.commodity.specifications,callback:function(e){t.$set(t.commodity,"specifications",e)},expression:"commodity.specifications"}}),i("span",{staticStyle:{"margin-left":"10px"}},[t._v("（一件多少个）")])],1),i("div",{staticStyle:{"padding-bottom":"10px","padding-top":"10px"}},[t._v("\n      出产地：  \n      "),i("Input",{staticStyle:{width:"84%"},attrs:{type:"text"},model:{value:t.commodity.home,callback:function(e){t.$set(t.commodity,"home",e)},expression:"commodity.home"}})],1),i("div",[t._v("\n      条形码：  \n      "),i("Input",{staticStyle:{width:"84%"},attrs:{type:"text",disabled:t.isDisabled},model:{value:t.commodity.bar_code,callback:function(e){t.$set(t.commodity,"bar_code",e)},expression:"commodity.bar_code"}})],1),i("div",{staticStyle:{"padding-bottom":"10px","padding-top":"10px"}},[t._v("\n      保质期：  \n      "),i("Input",{staticStyle:{width:"60%"},attrs:{type:"number"},model:{value:t.commodity.expire,callback:function(e){t.$set(t.commodity,"expire",e)},expression:"commodity.expire"}}),i("span",{staticStyle:{"margin-left":"10px"}},[t._v("（单位：天）")])],1),i("div",[t._v("\n      进货价格：\n      "),i("Input",{staticStyle:{width:"60%"},attrs:{type:"number"},on:{"on-blur":function(e){return t.formatItemPrice()}},model:{value:t.commodity.price_in,callback:function(e){t.$set(t.commodity,"price_in",e)},expression:"commodity.price_in"}}),i("span",{staticStyle:{"margin-left":"10px"}},[t._v("（一个多少钱）")])],1),i("div",{staticStyle:{"padding-bottom":"10px","padding-top":"10px"}},[t._v("\n      正发价格：\n      "),i("Input",{staticStyle:{width:"60%"},attrs:{type:"number"},on:{"on-blur":function(e){return t.formatItemPrice()}},model:{value:t.commodity.price_out,callback:function(e){t.$set(t.commodity,"price_out",e)},expression:"commodity.price_out"}}),i("span",{staticStyle:{"margin-left":"10px"}},[t._v("（一个多少钱）")])],1),i("div",[t._v("\n      批发价格：\n      "),i("Input",{staticStyle:{width:"60%"},attrs:{type:"number"},on:{"on-blur":function(e){return t.formatItemPrice()}},model:{value:t.commodity.price_out_down,callback:function(e){t.$set(t.commodity,"price_out_down",e)},expression:"commodity.price_out_down"}}),i("span",{staticStyle:{"margin-left":"10px"}},[t._v("（一个多少钱）")])],1),i("div",{staticStyle:{"padding-top":"10px"}},[t._v("\n      库存：    \n      "),i("Input",{staticStyle:{width:"60%"},attrs:{type:"number"},model:{value:t.commodity.stock,callback:function(e){t.$set(t.commodity,"stock",e)},expression:"commodity.stock"}}),i("span",{staticStyle:{"margin-left":"10px"}},[t._v("（还有多少个）")])],1)])],1)},n=[],r=(i("7f7f"),i("0e7a")),c=i("cf51"),a=i("53b7"),s={name:"Commodity",data:function(){return{weightMaxlength:8,user:{},isDisabled:!1,titleModalText:"",addEditCommodityModal:!1,titleList:[{type:"index",width:50,align:"center"},{title:"商品图片",key:"img_url"},{title:"商品名称",key:"name"},{title:"商品型号",key:"weight"},{title:"商品规格",key:"specifications"},{title:"出产地",key:"home"},{title:"条形码",key:"bar_code"},{title:"保质期",key:"expire"},{title:"进货价格",key:"price_in"},{title:"正发价格",key:"price_out"},{title:"批发价格",key:"price_out_down"},{title:"库存",key:"stock"},{title:"商品操作",slot:"action",width:130,align:"center"}],commodityList:[],inputText:"",searchType:"name",commodity:{},addOrEdit:0,isShowMoreBtn:!0,offset:0,limit:30}},methods:{formatItemPrice:function(){this.commodity.price_in=Object(a["b"])(this.commodity.price_in),this.commodity.price_out=Object(a["b"])(this.commodity.price_out),this.commodity.price_out_down=Object(a["b"])(this.commodity.price_out_down)},loadMore:function(){this.offset++,this.findCommodity()},addCommodityModal:function(){this.titleModalText="新增商品",this.addOrEdit=0,this.addEditCommodityModal=!0,this.isDisabled=!1},editCommodityModal:function(t,e){this.addOrEdit=1,this.commodity.code=t.code,this.commodity.name=t.name,this.commodity.weight=t.weight,this.commodity.specifications=t.specifications,this.commodity.home=t.home,this.commodity.bar_code=t.bar_code,this.commodity.expire=t.expire,this.commodity.price_in=t.price_in,this.commodity.price_out=t.price_out,this.commodity.price_out_down=t.price_out_down,this.commodity.stock=t.stock,this.commodity.create_time=t.create_time,this.addEditCommodityModal=!0,this.isDisabled=!0},deleteCommodityModal:function(t,e){var i=this,o=this;this.$Modal.confirm({title:"警告",content:"确定删除此商品？",onOk:function(){i.$Spin.show(),Object(r["a"])(Object(c["b"])(t),function(t){0===t.msg?(o.$Spin.hide(),o.$Message.success("删除成功"),o.offset=0,o.findCommodity()):(o.$Spin.hide(),o.$Message.error(t.error))},function(t){o.$Spin.hide(),o.$Message.error(t)})},onCancel:function(){}})},emptysDearchCommodity:function(){""===this.inputText&&(this.offset=0,this.findCommodity())},addEditCommodityModalCancel:function(){1===this.addOrEdit&&this.newCommodity()},addEditCommodityModalOk:function(){var t=this;0!==this.commodity.name.length?0!==this.commodity.weight.length?0!==this.commodity.specifications.length&&0!=this.commodity.specifications?0!==this.commodity.home.length?0!==this.commodity.bar_code.length?0!==this.commodity.expire.length&&0!=this.commodity.expire?(this.commodity.price_in=Object(a["b"])(this.commodity.price_in),"0.00"!==this.commodity.price_in?(this.commodity.price_out=Object(a["b"])(this.commodity.price_out),"0.00"!==this.commodity.price_out?(this.commodity.price_out_down=Object(a["b"])(this.commodity.price_out_down),"0.00"!==this.commodity.price_out_down?(0===this.commodity.stock.length&&(this.commodity.stock=0),this.commodity.stock<0?this.$Message.error("库存库存小于0"):(this.$Spin.show(),0===this.addOrEdit?Object(r["a"])(Object(c["a"])(t.commodity),function(e){0===e.msg?(t.$Message.success("添加成功"),t.newCommodity(),t.$Spin.hide(),t.offset=0,t.findCommodity()):(t.$Spin.hide(),t.$Message.error(e.error))},function(e){t.$Spin.hide(),t.$Message.error(e)}):Object(r["a"])(Object(c["d"])(t.commodity),function(e){0===e.msg?(t.$Message.success("修改成功"),t.$Spin.hide(),t.offset=0,t.findCommodity()):(t.$Spin.hide(),t.$Message.error(e.error)),t.newCommodity()},function(e){t.$Spin.hide(),t.$Message.error(e),t.newCommodity()}))):this.$Message.error("批发价格为空")):this.$Message.error("正发价格为空")):this.$Message.error("进货价格为空")):this.$Message.error("保质期为空"):this.$Message.error("条形码为空"):this.$Message.error("出产地为空"):this.$Message.error("商品规格为空"):this.$Message.error("商品型号：为空"):this.$Message.error("商店名称为空")},findCommodity:function(){var t=this;this.$Spin.show(),Object(r["a"])(Object(c["c"])(t.inputText,t.searchType,t.offset,t.limit),function(e){if(0===e.msg){if(e.data.length<t.limit?t.isShowMoreBtn=!1:t.isShowMoreBtn=!0,0==t.offset)t.commodityList=e.data;else for(var i=0;i<e.data.length;i++)t.commodityList.push(e.data[i]);t.$Spin.hide()}else t.$Spin.hide(),t.$Message.error(e.error)},function(e){t.$Spin.hide(),t.$Message.error(e)})},newCommodity:function(){this.commodity={code:"",name:"",weight:0,specifications:0,home:"",bar_code:"",expire:0,price_in:"0.00",price_out:"0.00",price_out_down:"0.00",stock:0,img_url:"",create_time:0}}},created:function(){null!=sessionStorage.getItem("user")?(this.user=JSON.parse(sessionStorage.getItem("user")),this.newCommodity(),this.findCommodity()):this.$router.push({name:"login"})}},d=s,m=i("2877"),u=Object(m["a"])(d,o,n,!1,null,"1b355290",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-d01d1610.c6e8344b.js.map