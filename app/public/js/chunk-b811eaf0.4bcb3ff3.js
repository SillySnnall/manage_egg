(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b811eaf0"],{4917:function(t,e,r){"use strict";var i=r("cb7c"),o=r("9def"),n=r("0390"),a=r("5f1b");r("214f")("match",1,function(t,e,r,s){return[function(r){var i=t(this),o=void 0==r?void 0:r[e];return void 0!==o?o.call(r,i):new RegExp(r)[e](String(i))},function(t){var e=s(r,t,this);if(e.done)return e.value;var d=i(t),c=String(this);if(!d.global)return a(d,c);var l=d.unicode;d.lastIndex=0;var u,m=[],p=0;while(null!==(u=a(d,c))){var h=String(u[0]);m[p]=h,""===h&&(d.lastIndex=n(c,o(d.lastIndex),l)),p++}return 0===p?null:m}]})},"49a3":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Row",{staticStyle:{"padding-bottom":"16px"},attrs:{gutter:16}},[r("Col",{attrs:{span:"6"}},[r("Input",{on:{input:t.emptysDearchOrder},model:{value:t.inputText,callback:function(e){t.inputText=e},expression:"inputText"}},[r("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend",transfer:!0},on:{"on-change":t.searchTypeChange},slot:"prepend",model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},[r("Option",{key:"-1",attrs:{value:"-1"}},[t._v("客户名称")]),r("Option",{key:"0",attrs:{value:"0"}},[t._v("未过账")]),r("Option",{key:"3",attrs:{value:"3"}},[t._v("已过账")])],1),r("Button",{attrs:{slot:"append",icon:"ios-search"},on:{click:t.findOrder},slot:"append"})],1)],1),r("Col",{attrs:{span:"2"}},[r("span",{staticStyle:{color:"#ed4014","font-size":"22px"}},[t._v("销售单")])])],1),r("Table",{attrs:{border:"",columns:t.titleList,data:t.tableData},scopedSlots:t._u([{key:"create_time",fn:function(e){var r=e.index;return[t._v(t._s(t.formatDate(t.tableData[r])))]}},{key:"state",fn:function(e){var r=e.index;return[t._v(t._s(t.stateFormat(t.tableData[r])))]}},{key:"action",fn:function(e){var i=e.index;return[r("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.editModalClick(t.tableData[i])}}},[t._v("查看")]),r("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small",disabled:3==t.tableData[i].state||0==t.user.authority.substr(4,5)},on:{click:function(e){return t.deleteModal(t.tableData[i])}}},[t._v("删除")]),r("Button",{attrs:{type:"error",size:"small",disabled:3==t.tableData[i].state||0==t.user.authority.substr(0,1)},on:{click:function(e){return t.stateChange(t.tableData[i])}}},[t._v("过账")])]}}])}),t.isShowMoreBtn?r("Button",{staticStyle:{width:"100%"},on:{click:t.loadMore}},[t._v("加载更多")]):t._e(),r("Modal",{attrs:{title:"修改销售单",closable:!1,fullscreen:"","footer-hide":"",closable:"","z-index":99,"class-name":"vertical-center-modal"},model:{value:t.editModal,callback:function(e){t.editModal=e},expression:"editModal"}},[r("Row",{staticStyle:{"padding-bottom":"16px"},attrs:{gutter:16,type:"flex",align:"middle"}},[r("Col",{attrs:{span:"4"}},[r("Input",{attrs:{readonly:"",disabled:"修改"==t.saveBtn},nativeOn:{click:function(e){return t.selectCustomerClick(e)}},model:{value:t.orderData.shop,callback:function(e){t.$set(t.orderData,"shop",e)},expression:"orderData.shop"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("客户名称")])])],1),r("Col",{staticStyle:{"margin-left":"40px"},attrs:{span:"3"}},[r("h2",[t._v("总数量："+t._s(t.countTotalNum))])]),r("Col",{attrs:{span:"3"}},[r("h2",[t._v("\n          总金额：\n          "),r("span",{staticStyle:{color:"#ed4014"}},[t._v(t._s(t.countTotalPrice))])])]),r("Col",{attrs:{span:"3"}},[r("h2",[t._v("\n          实收金额：\n          "),r("Input",{staticStyle:{color:"#ed4014",width:"100px"},attrs:{type:"number",disabled:"修改"==t.saveBtn},on:{"on-blur":t.formatRealPrice},model:{value:t.orderData.real_price,callback:function(e){t.$set(t.orderData,"real_price",e)},expression:"orderData.real_price"}})],1)]),r("Col",{attrs:{span:"1"}},[r("Button",{attrs:{type:"primary",disabled:3==t.orderData.state||t.user.code!=t.orderData.order_write_code},on:{click:t.saveSure}},[t._v(t._s(t.saveBtn))])],1),r("Col",{attrs:{span:"1"}},[r("Button",{attrs:{type:"primary",disabled:"修改"!=t.saveBtn},on:{click:t.printOrder}},[t._v("打印")])],1)],1),r("Table",{attrs:{border:"",columns:t.editTitleList,data:t.orderData.orderItemList},scopedSlots:t._u([{key:"name",fn:function(e){var i=e.index;return[r("Input",{attrs:{readonly:"",type:"text",disabled:"修改"==t.saveBtn},nativeOn:{click:function(e){return t.selectCommodityClick(i)}},model:{value:t.orderData.orderItemList[i].name,callback:function(e){t.$set(t.orderData.orderItemList[i],"name",e)},expression:"orderData.orderItemList[index].name"}})]}},{key:"specifications",fn:function(e){var r=e.index;return[t._v("1 * "+t._s(t.orderData.orderItemList[r].specifications))]}},{key:"unit",fn:function(e){var i=e.index;return[r("Select",{attrs:{disabled:"修改"==t.saveBtn,transfer:!0},on:{"on-change":function(e){return t.unitChange(t.orderData.orderItemList[i])}},model:{value:t.orderData.orderItemList[i].unit,callback:function(e){t.$set(t.orderData.orderItemList[i],"unit",e)},expression:"orderData.orderItemList[index].unit"}},[r("Option",{key:"个",attrs:{value:"个"}},[t._v("个")]),r("Option",{key:"件",attrs:{value:"件"}},[t._v("件")])],1)]}},{key:"num",fn:function(e){var i=e.index;return[r("Input",{attrs:{type:"number",disabled:"修改"==t.saveBtn},model:{value:t.orderData.orderItemList[i].num,callback:function(e){t.$set(t.orderData.orderItemList[i],"num",e)},expression:"orderData.orderItemList[index].num"}})]}},{key:"price",fn:function(e){var i=e.index;return[r("Input",{attrs:{type:"number",disabled:"修改"==t.saveBtn},on:{"on-blur":function(e){return t.formatItemPrice(t.orderData.orderItemList[i])}},model:{value:t.orderData.orderItemList[i].price,callback:function(e){t.$set(t.orderData.orderItemList[i],"price",e)},expression:"orderData.orderItemList[index].price"}})]}},{key:"total_price",fn:function(e){var r=e.index;return[t._v(t._s(t.countItemTotalPrice(t.orderData.orderItemList[r])))]}},{key:"action",fn:function(e){var i=e.index;return[r("Button",{attrs:{type:"error",size:"small",disabled:"修改"==t.saveBtn},on:{click:function(e){return t.deleteSaleModal(i)}}},[t._v("删除")])]}}])}),r("Button",{staticStyle:{width:"100%"},attrs:{size:"large",disabled:"修改"==t.saveBtn},on:{click:t.addItem}},[t._v("添加商品")])],1),r("Modal",{attrs:{title:"请选择客户",closable:!1,fullscreen:"","footer-hide":"",closable:"","class-name":"vertical-center-modal"},model:{value:t.selectCustomerModal,callback:function(e){t.selectCustomerModal=e},expression:"selectCustomerModal"}},[r("Row",{staticStyle:{"padding-bottom":"16px"},attrs:{gutter:16}},[r("Col",{attrs:{span:"6"}},[r("Input",{on:{input:t.emptysDearchCustomer},model:{value:t.inputCustomerText,callback:function(e){t.inputCustomerText=e},expression:"inputCustomerText"}},[r("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:t.searchCustomerType,callback:function(e){t.searchCustomerType=e},expression:"searchCustomerType"}},[r("Option",{attrs:{value:"shop"}},[t._v("商店名称")]),r("Option",{attrs:{value:"name"}},[t._v("客户名称")]),r("Option",{attrs:{value:"phone"}},[t._v("电话号码")])],1),r("Button",{attrs:{slot:"append",icon:"ios-search"},on:{click:t.findCustomer},slot:"append"})],1)],1)],1),r("Table",{attrs:{border:"",columns:t.customerTitleList,data:t.customerList},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.row;return[r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.selectCustomerModalBtn(i)}}},[t._v("选择")])]}}])}),t.isCustomerShowMoreBtn?r("Button",{staticStyle:{width:"100%"},on:{click:t.loadCustomerMore}},[t._v("加载更多")]):t._e()],1),r("Modal",{attrs:{title:"请选择商品",closable:!1,fullscreen:"","footer-hide":"",closable:"","class-name":"vertical-center-modal"},model:{value:t.selectCommodityModal,callback:function(e){t.selectCommodityModal=e},expression:"selectCommodityModal"}},[r("Row",{staticStyle:{"padding-bottom":"16px"},attrs:{gutter:16}},[r("Col",{attrs:{span:"6"}},[r("Input",{on:{input:t.emptysDearchCommodity},model:{value:t.inputCommodityText,callback:function(e){t.inputCommodityText=e},expression:"inputCommodityText"}},[r("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:t.searchCommodityType,callback:function(e){t.searchCommodityType=e},expression:"searchCommodityType"}},[r("Option",{attrs:{value:"name"}},[t._v("商品名称")]),r("Option",{attrs:{value:"bar_code"}},[t._v("条形码")])],1),r("Button",{attrs:{slot:"append",icon:"ios-search"},on:{click:t.findCommodity},slot:"append"})],1)],1)],1),r("Table",{attrs:{border:"",columns:t.commodityTitleList,data:t.commodityList},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.row;return[r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.selectCommodityModalBtn(i)}}},[t._v("选择")])]}}])}),t.isCommodityShowMoreBtn?r("Button",{staticStyle:{width:"100%"},on:{click:t.loadCommodityMore}},[t._v("加载更多")]):t._e()],1),r("PrintOrders",{ref:"printOrders"})],1)},o=[],n=(r("7f7f"),r("c5f6"),r("bd86")),a=r("0e7a"),s=r("7ebd"),d=r("53b7"),c=r("30ef"),l=r("c51d"),u=r("cf51"),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"printTest"}},[r("div",{staticStyle:{"text-align":"center",margin:"auto",width:"740px"}},[r("br"),r("div",{staticStyle:{"font-size":"30px","margin-top":"30px"}},[t._v(t._s(t.printOrderData.company.name)+"销售单")]),r("br"),r("table",{staticStyle:{width:"100%","margin-top":"5px","font-size":"14px"},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("单据日期："+t._s(t.formatDate(t.printOrderData.orders)))]),r("td",{staticStyle:{"text-align":"right"}},[t._v("单据编号："+t._s(t.printOrderData.orders.order_num_code))])]),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("往来单位："+t._s(t.printOrderData.orders.shop))]),r("td",{staticStyle:{"text-align":"right"}},[t._v("电话："+t._s(t.printOrderData.orders.phone))])])]),r("table",{staticStyle:{"border-collapse":"collapse",width:"100%","margin-top":"5px","text-align":"center","font-size":"14px"},attrs:{cellspacing:"0",cellpadding:"0",border:"1"}},[t._m(0),t._l(t.printOrderData.orders.orderItemList,function(e,i){return[r("tr",[r("td",[t._v(t._s(i+1))]),r("td",[t._v(t._s(e.bar_code))]),r("td",[t._v(t._s(e.name))]),r("td",[t._v(t._s(e.weight))]),r("td",[t._v(t._s(e.unit))]),r("td",[t._v(t._s(e.num))]),r("td",[t._v(t._s(e.price))]),r("td",[t._v(t._s(e.num*e.price))]),r("td")])]}),r("tr",[r("td",{staticStyle:{"text-align":"left"},attrs:{colspan:"5"}},[t._v(" 金额（大写）："+t._s(t.printOrderData.orders.price_up))]),r("td",[t._v(t._s(t.printOrderData.orders.num))]),r("th",[t._v("金额")]),r("th",{staticStyle:{"text-align":"left"},attrs:{colspan:"4"}},[t._v(" "+t._s(t.printOrderData.orders.price))])])],2),r("table",{staticStyle:{width:"100%","font-size":"14px","margin-top":"5px"},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("地址："+t._s(t.printOrderData.company.address))]),r("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.printOrderData.company.bank))])]),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("公司电话："+t._s(t.printOrderData.company.company_phone))])]),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("业务电话："+t._s(t.printOrderData.company.business_phone))]),r("td",{staticStyle:{"text-align":"right"}},[t._v("收货人签字：                             ")])])])])])])},p=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("th",{attrs:{width:"34"}},[t._v("行号")]),r("th",{attrs:{width:"120"}},[t._v("条码")]),r("th",{attrs:{width:"226"}},[t._v("商品名称")]),r("th",{attrs:{width:"44"}},[t._v("规格")]),r("th",{attrs:{width:"34"}},[t._v("单位")]),r("th",{attrs:{width:"40"}},[t._v("数量")]),r("th",{attrs:{width:"74"}},[t._v("单价")]),r("th",{attrs:{width:"74"}},[t._v("金额")]),r("th",{attrs:{width:"108"}},[t._v("备注")])])}],h=r("eebe"),f={name:"PrintOrders",data:function(){return{printOrderData:{company:{name:"",address:"",bank:"",company_phone:"",business_phone:""},orders:{create_time:"",order_num_code:"",shop:"",phone:"",num:0,price:"",price_up:"",orderItemList:[{bar_code:"",name:"",weight:"",unit:"",num:0,price:""}]}}}},computed:{formatDate:function(t){return function(t){return Object(d["a"])(new Date(Number(t.create_time)),"yyyy-MM-dd")}}},methods:{startPrintOrders:function(t){var e=this;this.printOrderData=t,setTimeout(function(){e.printPdf()},"100")},printPdf:function(){var t=Object(h["a"])();t.ADD_PRINT_HTM(0,0,"100%","100%",document.getElementById("printTest").innerHTML),t.PREVIEW()}},created:function(){}},_=f,v=r("2877"),y=Object(v["a"])(_,m,p,!1,null,"47e345da",null),b=y.exports,g={name:"History",components:{PrintOrders:b},data:function(){var t;return t={user:{},saveBtn:"修改",inputCustomerText:"",searchCustomerType:"shop",customerTitleList:[{type:"index",width:50,align:"center"},{title:"商店名称",key:"shop"},{title:"客户名称",key:"name"},{title:"电话号码",key:"phone"},{title:"地区",key:"region"},{title:"操作",slot:"action",align:"center"}],customerList:[],isCustomerShowMoreBtn:!0,selectCustomerModal:!1,inputCommodityText:"",searchCommodityType:"name",commodityTitleList:[{type:"index",width:50,align:"center"},{title:"商品图片",key:"img_url"},{title:"商店名称",key:"name"},{title:"商品重量",key:"weight"},{title:"商品规格",key:"specifications"},{title:"出产地",key:"home"},{title:"条形码",key:"bar_code"},{title:"保质期",key:"expire"},{title:"进货价格",key:"price_in"},{title:"正发价格",key:"price_out"},{title:"批发价格",key:"price_out_down"},{title:"库存",key:"stock"},{title:"操作",slot:"action",align:"center"}],commodityList:[],isCommodityShowMoreBtn:!0,selectCommodityModal:!1,offset:0,limit:30,readonly:!0,editModal:!1},Object(n["a"])(t,"offset",0),Object(n["a"])(t,"limit",30),Object(n["a"])(t,"isShowMoreBtn",!0),Object(n["a"])(t,"searchType","-1"),Object(n["a"])(t,"inputText",""),Object(n["a"])(t,"titleList",[{type:"index",width:50,align:"center"},{title:"客户名称",key:"shop"},{title:"数量",key:"num"},{title:"金额",key:"price"},{title:"状态",slot:"state"},{title:"创建时间",slot:"create_time"},{title:"操作",slot:"action",align:"center"}]),Object(n["a"])(t,"editTitleList",[{type:"index",width:50,align:"center"},{title:"商品名称",slot:"name"},{title:"条形码",key:"bar_code"},{title:"规格",slot:"specifications"},{title:"单位",slot:"unit"},{title:"数量",slot:"num"},{title:"单价",slot:"price"},{title:"金额",slot:"total_price"},{title:"操作",slot:"action",align:"center"}]),Object(n["a"])(t,"tableData",[]),Object(n["a"])(t,"itemIndex",0),Object(n["a"])(t,"orderData",{code:"",customer_code:"",order_num_code:"",order_delivery_code:"",order_write_code:"",num:0,price:"",price_up:"",shop:"",state:0,real_price:"0.00",create_time:"",orderItemList:[]}),t},mounted:function(){var t=this;c["a"].$on("catOrder",function(e){e.code;t.findOrder()})},computed:{formatRealPrice:function(){var t=this;return function(){t.orderData.real_price=Object(d["b"])(t.orderData.real_price)}},formatItemPrice:function(t){return function(t){t.price=Object(d["b"])(t.price)}},countItemTotalPrice:function(t){return function(t){return Object(d["b"])(t.num*t.price)}},countTotalNum:function(){var t=this;return this.orderData.num=0,this.orderData.orderItemList.map(function(e,r){t.orderData.num+=1*e.num}),this.orderData.num},countTotalPrice:function(){var t=0;return this.orderData.orderItemList.map(function(e,r){t+=parseFloat(e.price*e.num)}),this.orderData.price=Object(d["b"])(t),this.orderData.price},formatDate:function(t){return function(t){return Object(d["a"])(new Date(Number(t.create_time)),"yyyy-MM-dd")}},stateFormat:function(t){return function(t){switch(t.state){case 0:return"未过账";case 3:return"已过账"}}}},methods:{stateChange:function(t){var e=this,r=this;this.$Modal.confirm({title:"警告",content:"确定过账此订单？",onOk:function(){t.state=3,e.$Spin.show(),Object(a["a"])(Object(s["f"])(t),function(t){0===t.msg?(r.$Spin.hide(),r.$Message.success("更改成功"),r.offset=0,r.findOrder()):(r.$Spin.hide(),r.$Message.error(t.error))},function(t){r.$Spin.hide(),r.$Message.error(t)})},onCancel:function(){}})},emptysDearchCustomer:function(){""===this.inputCustomerText&&(this.offset=0,this.findCustomer())},loadCustomerMore:function(){this.offset++,this.findCustomer()},selectCustomerModalBtn:function(t){this.orderData.customer_code=t.code,this.orderData.shop=t.shop,this.selectCustomerModal=!1,this.inputCustomerText="",this.searchCustomerType="shop"},emptysDearchCommodity:function(){""===this.inputCommodityText&&(this.offset=0,this.findCommodity())},loadCommodityMore:function(){this.offset++,this.findCommodity()},selectCommodityModalBtn:function(t){var e=this.orderData.orderItemList[this.itemIndex];if(e.commodity_code!=t.code)for(var r=0;r<this.orderData.orderItemList.length;r++)if(t.code===this.orderData.orderItemList[r].commodity_code)return void this.$Message.error("销售单中已有此商品");e.commodity_code=t.code,e.bar_code=t.bar_code,e.specifications=t.specifications,e.price=t.price_out,e.unit="个",e.name=t.name,this.selectCommodityModal=!1,this.inputCommodityText="",this.searchCommodityType="name"},addItem:function(){0==this.orderData.orderItemList.length||""!=this.orderData.orderItemList[this.orderData.orderItemList.length-1].commodity_code?this.orderData.orderItemList.push({code:"",order_code:"",commodity_code:"",num:0,bar_code:"",unit:"个",price:"0.00",specifications:0,name:"",createTime:""}):this.$message.error("上一个条目未选择商品，请选择后再添加新条目")},deleteSaleModal:function(t){var e=this;this.$Modal.confirm({title:"警告",content:"确定删除此商品？",onOk:function(){1!=e.orderData.orderItemList.length?e.orderData.orderItemList.splice(t,1):e.$Message.error("只剩一个条目，无法删除")},onCancel:function(){}})},selectCommodityClick:function(t){"修改"!=this.saveBtn&&(this.offset=0,this.itemIndex=t,this.findCommodity(),this.selectCommodityModal=!0)},selectCustomerClick:function(){"修改"!=this.saveBtn&&(this.offset=0,this.findCustomer(),this.selectCustomerModal=!0)},editModalClick:function(t){this.saveBtn="修改",this.orderData.code=t.code,this.orderData.customer_code=t.customer_code,this.orderData.order_num_code=t.order_num_code,this.orderData.order_delivery_code=t.order_delivery_code,this.orderData.order_write_code=t.order_write_code,this.orderData.num=t.num,this.orderData.price=t.price,this.orderData.price_up=t.price_up,this.orderData.shop=t.shop,this.orderData.state=t.state,this.orderData.real_price=t.real_price,this.orderData.create_time=t.create_time,this.findOrderItem(t),this.editModal=!0},searchTypeChange:function(){this.findOrder()},deleteModal:function(t){var e=this,r=this;this.$Modal.confirm({title:"警告",content:"确定删除此订单？",onOk:function(){e.$Spin.show(),Object(a["a"])(Object(s["b"])(t),function(t){0===t.msg?(r.$Spin.hide(),r.$Message.success("删除成功"),r.offset=0,r.findOrder()):(r.$Spin.hide(),r.$Message.error(t.error))},function(t){r.$Spin.hide(),r.$Message.error(t)})},onCancel:function(){}})},loadMore:function(){this.offset++,this.findOrder()},emptysDearchOrder:function(){""===this.inputText&&(this.offset=0,this.findOrder())},findOrder:function(){var t=this;this.$Spin.show(),Object(a["a"])(Object(s["c"])(t.inputText,t.searchType,t.offset,t.limit),function(e){if(0===e.msg){if(e.data.length<t.limit?t.isShowMoreBtn=!1:t.isShowMoreBtn=!0,0==t.offset)t.tableData=e.data;else for(var r=0;r<e.data.length;r++)t.tableData.push(e.data[r]);t.$Spin.hide()}else t.$Spin.hide(),t.$Message.error(e.error)},function(e){t.$Spin.hide(),t.$Message.error(e)})},findOrderItem:function(t){var e=this;this.$Spin.show(),Object(a["a"])(Object(s["d"])(t),function(t){0===t.msg?(e.orderData.orderItemList=t.data,e.$Spin.hide()):(e.$Spin.hide(),e.$Message.error(t.error))},function(t){e.$Spin.hide(),e.$Message.error(t)})},findCustomer:function(){var t=this;t.$Spin.show(),Object(a["a"])(Object(l["c"])(t.inputCustomerText,t.searchCustomerType,t.offset,t.limit),function(e){if(0===e.msg){if(e.data.length<t.limit?t.isCustomerShowMoreBtn=!1:t.isCustomerShowMoreBtn=!0,0==t.offset)t.customerList=e.data;else for(var r=0;r<e.data.length;r++)t.customerList.push(e.data[r]);t.$Spin.hide()}else t.$Spin.hide(),t.$Message.error(e.error)},function(e){t.$Spin.hide(),t.$Message.error(e)})},findCommodity:function(){var t=this;this.$Spin.show(),Object(a["a"])(Object(u["c"])(t.inputCommodityText,t.searchCommodityType,t.offset,t.limit),function(e){if(0===e.msg){if(e.data.length<t.limit?t.isCommodityShowMoreBtn=!1:t.isCommodityShowMoreBtn=!0,0==t.offset)t.commodityList=e.data;else for(var r=0;r<e.data.length;r++)t.commodityList.push(e.data[r]);t.$Spin.hide()}else t.$Spin.hide(),t.$Message.error(e.error)},function(e){t.$Spin.hide(),t.$Message.error(e)})},unitChange:function(t){"个"===t.unit?0===t.specifications?t.price=Object(d["b"])(0):t.price=Object(d["b"])(t.price/t.specifications):t.price=Object(d["b"])(t.price*t.specifications)},saveSure:function(){var t=this;"修改"==this.saveBtn?this.saveBtn="保存":this.$Modal.confirm({title:"警告",content:"确定保存此订单？",onOk:function(){t.saveOrder()},onCancel:function(){}})},saveOrder:function(){if(null!=this.orderData.customer_code&&""!==this.orderData.customer_code)if(null!=this.orderData.order_write_code&&""!==this.orderData.order_write_code)if(null!=this.orderData.state)if(null!=this.orderData.orderItemList&&0!==this.orderData.orderItemList.length){for(var t=0;t<this.orderData.orderItemList.length;t++){if(null==this.orderData.orderItemList[t].commodity_code||""==this.orderData.orderItemList[t].commodity_code)return void this.$Message.error("有条目未选择商品");if(null==this.orderData.orderItemList[t].num||0==this.orderData.orderItemList[t].num)return void this.$Message.error("有条目未填写商品数量")}var e=this;e.$Spin.show(),Object(a["a"])(Object(s["g"])(this.orderData),function(t){0===t.msg?(e.$Message.success("保存成功"),e.$Spin.hide(),e.saveBtn="修改",e.findOrder()):(e.$Spin.hide(),e.$Message.error(t.error))},function(t){e.$Spin.hide(),e.$Message.error(t)})}else this.$Message.error("订单没有商品");else this.$Message.error("订单状态为空");else this.$Message.error("下单员为空");else this.$Message.error("客户未选择")},printOrder:function(){var t=this;t.$Spin.show(),Object(a["a"])(Object(s["e"])(this.orderData),function(e){0===e.msg?(t.$refs.printOrders.startPrintOrders(e.data),t.$Spin.hide()):(t.$Spin.hide(),t.$Message.error(e.error))},function(e){t.$Spin.hide(),t.$Message.error(e)})}},created:function(){null!=sessionStorage.getItem("user")?(this.user=JSON.parse(sessionStorage.getItem("user")),this.findOrder()):this.$router.push({name:"login"})}},x=g,D=Object(v["a"])(x,i,o,!1,null,"044e09e2",null);e["default"]=D.exports},"7ebd":function(t,e,r){"use strict";function i(t){return{ac:"addOrder",customer_code:t.customer_code,shop:t.shop,order_write_code:t.order_write_code,num:t.num,price:t.price,state:t.state,real_price:t.real_price,orderItemList:t.orderItemList}}function o(t){return{ac:"updateOrder",code:t.code,customer_code:t.customer_code,shop:t.shop,order_write_code:t.order_write_code,num:t.num,price:t.price,state:t.state,real_price:t.real_price,create_time:t.create_time,orderItemList:t.orderItemList}}function n(t){return{ac:"findOrderItem",code:t.code}}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-1",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;return{ac:"findOrder",offset:r,limit:i,searchText:t,searchType:e}}function s(t){return{ac:"deleteOrder",code:t.code}}function d(t){return{ac:"stateChange",code:t.code,state:t.state}}function c(t){return{ac:"getPrintOrders",code:t.code}}r.d(e,"a",function(){return i}),r.d(e,"g",function(){return o}),r.d(e,"d",function(){return n}),r.d(e,"c",function(){return a}),r.d(e,"b",function(){return s}),r.d(e,"f",function(){return d}),r.d(e,"e",function(){return c})},eebe:function(t,e,r){"use strict";r.d(e,"a",function(){return s});r("4917");var i=null;function o(){try{var t=navigator.userAgent;if(null!=t.match(/Windows\sPhone/i))return!0;if(null!=t.match(/iPhone|iPod/i))return!0;if(null!=t.match(/Android/i))return!0;if(null!=t.match(/Edge\D?\d+/i))return!0;var e=t.match(/Trident\D?\d+/i),r=t.match(/MSIE\D?\d+/i),i=t.match(/OPR\D?\d+/i),o=t.match(/Firefox\D?\d+/i),n=t.match(/x64/i);if(null==e&&null==r&&null!==n)return!0;if(null!==o){if(o=o[0].match(/\d+/),o[0]>=42||null!==n)return!0}else if(null!==i){if(i=i[0].match(/\d+/),i[0]>=32)return!0}else if(null==e&&null==r){var a=t.match(/Chrome\D?\d+/i);if(null!==a&&(a=a[0].match(/\d+/),a[0]>=42))return!0}return!1}catch(s){return!0}}if(o()){var n=document.head||document.getElementsByTagName("head")[0]||document.documentElement,a=document.createElement("script");a.src="http://localhost:8000/CLodopfuncs.js?priority=1",n.insertBefore(a,n.firstChild),a=document.createElement("script"),a.src="http://localhost:18000/CLodopfuncs.js?priority=0",n.insertBefore(a,n.firstChild)}function s(t,e){var r,n="<br><font color='#FF00FF'>打印控件未安装!点击这里<a href='install_lodop32.exe' target='_self'>执行安装</a>,安装后请刷新页面或重新进入。</font>",a="<br><font color='#FF00FF'>打印控件需要升级!点击这里<a href='install_lodop32.exe' target='_self'>执行升级</a>,升级后请重新进入。</font>",s="<br><font color='#FF00FF'>打印控件未安装!点击这里<a href='install_lodop64.exe' target='_self'>执行安装</a>,安装后请刷新页面或重新进入。</font>",d="<br><font color='#FF00FF'>打印控件需要升级!点击这里<a href='install_lodop64.exe' target='_self'>执行升级</a>,升级后请重新进入。</font>",c="<br><br><font color='#FF00FF'>（注意：如曾安装过Lodop旧版附件npActiveXPLugin,请在【工具】->【附加组件】->【扩展】中先卸它）</font>",l="<br><br><font color='#FF00FF'>(如果此前正常，仅因浏览器升级或重安装而出问题，需重新执行以上安装）</font>",u="<br><font color='#FF00FF'>CLodop云打印服务需升级!点击这里<a href='CLodop_Setup_for_Win32NT.exe' target='_self'>执行升级</a>,升级后请刷新页面。</font>";try{var m=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0;if(o()){try{r=getCLodop()}catch(h){}if(!r&&"complete"!==document.readyState)return void alert("C-Lodop没准备好，请稍后再试！");r&&(CLODOP.CVERSION<"3.0.0.2"&&(m?document.write(u):document.documentElement.innerHTML=u+document.documentElement.innerHTML),e&&e.parentNode&&e.parentNode.removeChild(e),t&&t.parentNode&&t.parentNode.removeChild(t))}else{var p=m&&navigator.userAgent.indexOf("x64")>=0;if(void 0!=t||void 0!=e?r=m?t:e:null==i?(r=document.createElement("object"),r.setAttribute("width",0),r.setAttribute("height",0),r.setAttribute("style","position:absolute;left:0px;top:-100px;width:0px;height:0px;"),m?r.setAttribute("classid","clsid:2105C259-1E0C-4534-8141-A753534CB4CA"):r.setAttribute("type","application/x-print-lodop"),document.documentElement.appendChild(r),i=r):r=i,null==r||"undefined"==typeof r.VERSION)return navigator.userAgent.indexOf("Chrome")>=0&&(document.documentElement.innerHTML=l+document.documentElement.innerHTML),navigator.userAgent.indexOf("Firefox")>=0&&(document.documentElement.innerHTML=c+document.documentElement.innerHTML),p?document.write(s):m?document.write(n):document.documentElement.innerHTML=n+document.documentElement.innerHTML,r}return r.VERSION<"6.0"?(o()||(p?document.write(d):m?document.write(a):document.documentElement.innerHTML=a+document.documentElement.innerHTML),r):r}catch(h){alert("getLodop出错:"+h)}}}}]);
//# sourceMappingURL=chunk-b811eaf0.4bcb3ff3.js.map